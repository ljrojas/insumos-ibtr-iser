{
    "type": [
        2,
        2,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        2,
        0,
        1,
        2,
        2,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        3,
        0,
        1,
        2,
        0,
        1,
        2,
        2,
        2,
        0,
        1,
        3,
        3,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        3,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        3,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2
    ],
    "data": [
        "\nR version 4.0.3 (2020-10-10) -- \"Bunny-Wunnies Freak Out\"\nCopyright (C) 2020 The R Foundation for Statistical Computing\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\n\nR es un software libre y viene sin GARANTIA ALGUNA.\nUsted puede redistribuirlo bajo ciertas circunstancias.\nEscriba 'license()' o 'licence()' para detalles de distribucion.\n\nR es un proyecto colaborativo con muchos contribuyentes.\nEscriba 'contributors()' para obtener más información y\n'citation()' para saber cómo citar R o paquetes de R en publicaciones.\n\n",
        "Escriba 'demo()' para demostraciones, 'help()' para el sistema on-line de ayuda,\no 'help.start()' para abrir el sistema de ayuda HTML con su navegador.\nEscriba 'q()' para salir de R.\n\n",
        "> ",
        "# library(rvest)",
        "> ",
        "library(RSelenium) # requiere chrome y java",
        "Warning message:\n",
        "package ‘RSelenium’ was built under R version 4.0.4 \n",
        "> ",
        "library(stringr)",
        "> ",
        "library(stringi)",
        "> ",
        "library(readr)",
        "> ",
        "library(purrr)",
        "> ",
        "library(readr)",
        "> ",
        "library(dplyr)",
        "\nAttaching package: ‘dplyr’\n\n",
        "The following objects are masked from ‘package:stats’:\n\n    filter, lag\n\n",
        "The following objects are masked from ‘package:base’:\n\n    intersect, setdiff, setequal, union\n\n",
        "> ",
        "# url de busqueda zona censal y localidad rural",
        "> ",
        "url_data <- \"https://www.sii.cl/ayudas/asistencia/oficinas/3048-3049.html\"",
        "> ",
        "limpiar_texto <- function(x) {",
        "+ ",
        "  x <-",
        "+ ",
        "    x %>%",
        "+ ",
        "    stri_trans_general(\"Latin-ASCII\") %>%",
        "+ ",
        "    str_to_lower() %>%",
        "+ ",
        "    str_trim()",
        "+ ",
        "  return(x)",
        "+ ",
        "}",
        "> ",
        "rescatar_botones <- function(remDr) {",
        "+ ",
        "  btns <- webElement",
        "+ ",
        "  sel_reg <- webElement",
        "+ ",
        "  sel_com <- webElement",
        "+ ",
        "  btns <- remDr$findElements(\"tag\", \"button\")",
        "+ ",
        "  for (i in seq_len(length(btns))) btns[[i]]$highlightElement()",
        "+ ",
        "  sel_reg <- btns[[1]]",
        "+ ",
        "  sel_com <- btns[[2]]",
        "+ ",
        "  return(list(sel_reg,sel_com))",
        "+ ",
        "}",
        "> ",
        "# debiese abrir un navegador chrome",
        "> ",
        "rD <- rsDriver()",
        "checking Selenium Server versions:\n",
        "BEGIN: PREDOWNLOAD\n",
        "BEGIN: DOWNLOAD\n",
        "BEGIN: POSTDOWNLOAD\n",
        "checking chromedriver versions:\n",
        "BEGIN: PREDOWNLOAD\n",
        "BEGIN: DOWNLOAD\n",
        "BEGIN: POSTDOWNLOAD\n",
        "checking geckodriver versions:\n",
        "BEGIN: PREDOWNLOAD\n",
        "BEGIN: DOWNLOAD\n",
        "BEGIN: POSTDOWNLOAD\n",
        "checking phantomjs versions:\n",
        "BEGIN: PREDOWNLOAD\n",
        "BEGIN: DOWNLOAD\n",
        "BEGIN: POSTDOWNLOAD\n",
        "[1] \"Connecting to remote server\"\n$acceptInsecureCerts\n[1] FALSE\n\n$browserName\n[1] \"chrome\"\n\n$browserVersion\n[1] \"89.0.4389.82\"\n\n$chrome\n$chrome$chromedriverVersion\n[1] \"89.0.4389.23 (61b08ee2c50024bab004e48d2b1b083cdbdac579-refs/branch-heads/4389@{#294})\"\n\n$chrome$userDataDir\n[1] \"C:\\\\Users\\\\56964\\\\AppData\\\\Local\\\\Temp\\\\scoped_dir11652_1505856480\"\n\n\n$`goog:chromeOptions`\n$`goog:chromeOptions`$debuggerAddress\n[1] \"localhost:54101\"\n\n\n$networkConnectionEnabled\n[1] FALSE\n\n$pageLoadStrategy\n[1] \"normal\"\n\n$platformName\n",
        "[1] \"windows\"\n\n$proxy\nnamed list()\n\n$setWindowRect\n[1] TRUE\n\n$strictFileInteractability\n[1] FALSE\n\n$timeouts\n$timeouts$implicit\n[1] 0\n\n$timeouts$pageLoad\n[1] 300000\n\n$timeouts$script\n[1] 30000\n\n\n$unhandledPromptBehavior\n[1] \"dismiss and notify\"\n\n$`webauthn:extension:largeBlob`\n[1] TRUE\n\n$`webauthn:virtualAuthenticators`\n[1] TRUE\n\n$webdriver.remote.sessionid\n[1] \"a65ab12af796d4558d89d20a399eb862\"\n\n$id\n[1] \"a65ab12af796d4558d89d20a399eb862\"\n\n",
        "> ",
        "remDr <- rD[[\"client\"]]",
        "> ",
        "# visistar url busqueda",
        "> ",
        "remDr$navigate(url_data)",
        "> ",
        "btns <- rescatar_botones(remDr)",
        "> ",
        "list(sel_reg = sel_reg)",
        "Error: objeto 'sel_reg' no encontrado\n",
        "> ",
        "list(sel_reg = webElement)",
        "$sel_reg\nGenerator for class \"webElement\":\n\nClass fields:\n                                                            \nName:        statusCodes            status       statusclass\nClass:        data.frame           numeric         character\n                                                            \nName:          sessionid             hcode             value\nClass:         character           numeric              list\n                                                            \nName:   remoteServerAddr              port",
        "       browserName\nClass:         character           numeric         character\n                                                            \nName:               path           version          platform\nClass:         character         character         character\n                                                            \nName:         javascript      nativeEvents extraCapabilities\nClass:           logical           logical              list\n                                                            \nName: ",
        "         serverURL       sessionInfo         elementId\nClass:         character              list         character\n\nClass Methods: \n     \"getPageSource\", \"findChildElements\", \"selectTag\", \"findElements\", \n     \"getCurrentUrl\", \"maxWindowSize\", \"setImplicitWaitTimeout\", \n     \"setTimeout\", \"buttondown\", \"setElementAttribute\", \"closeWindow\", \n     \"setWindowSize\", \"describeElement\", \"goForward\", \"quit\", \"trace\", \n     \"deleteAllCookies\", \"isElementDisplayed\", \"getElementAttribute\", \n     \"getSessions\", \"getSession\"",
        ", \"getClass\", \"field\", \"show#remoteDriver\", \n     \"deleteCookieNamed\", \"getLogTypes\", \"sendKeysToActiveElement\", \n     \"errorDetails\", \"open\", \"getWindowPosition\", \"executeScript\", \n     \"phantomExecute\", \"getWindowHandles\", \"show\", \"export\", \"acceptAlert\", \n     \"isElementEnabled\", \"getWindowSize\", \"initFields\", \"dismissAlert\", \n     \"checkError\", \"getElementSize\", \"compareElements\", \"checkStatus\", \n     \"clearElement\", \"findChildElement\", \"navigate\", \"getElementText\", \n     \"findElement\", \"callSuper\", \"buttonup\"",
        ", \"show#envRefClass\", \"log\", \n     \"doubleclick\", \"getElementLocationInView\", \"usingMethods\", \n     \"setAsyncScriptTimeout\", \"getAlertText\", \"switchToFrame\", \n     \"setWindowPosition\", \"addCookie\", \"click\", \"getCurrentWindowHandle\", \n     \"initialize#remoteDriver\", \"sendKeysToAlert\", \"copy\", \"refresh\", \n     \"close\", \"obscureUrlPassword\", \"getAllCookies\", \"screenshot\", \n     \"switchToWindow\", \"closeall\", \"getElementLocation\", \"getStatus\", \n     \"sendKeysToElement\", \".objectPackage\", \"executeAsyncScript\", \n     ",
        "\"getElementTagName\", \"closeServer\", \"initialize\", \"untrace\", \n     \".objectParent\", \"queryRD\", \"highlightElement\", \n     \"getElementValueOfCssProperty\", \"initialize#errorHandler\", \n     \"mouseMoveToLocation\", \"submitElement\", \"isElementSelected\", \n     \"showErrorClass\", \"getRefClass\", \"goBack\", \"import\", \"clickElement\", \n     \"getActiveElement\", \"getTitle\"\n\nReference Superclasses: \n     \"remoteDriver\", \"errorHandler\", \"envRefClass\"\n\n\n",
        "> ",
        "rescatar_botones <- function(remDr) {",
        "+ ",
        "  btns <- webElement",
        "+ ",
        "  sel_reg <- webElement",
        "+ ",
        "  sel_com <- webElement",
        "+ ",
        "  btns <- remDr$findElements(\"tag\", \"button\")",
        "+ ",
        "  for (i in seq_len(length(btns))) btns[[i]]$highlightElement()",
        "+ ",
        "  sel_reg <- btns[[1]]",
        "+ ",
        "  sel_com <- btns[[2]]",
        "+ ",
        "  return(list(sel_reg = sel_reg, sel_com = sel_com))",
        "+ ",
        "}",
        "> ",
        "btns <- rescatar_botones(remDr)",
        "> ",
        "sel_reg <- btns$sel_reg",
        "> ",
        "sel_com <- btns$sel_com",
        "> ",
        "btns$sel_reg$clickElement()",
        "> ",
        "# opt_reg <- remDr$findElements(\"class\",\"dropdown-menu inner\")",
        "> ",
        "opt_reg <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[1]]",
        "> ",
        "opt_reg$highlightElement()",
        "> ",
        "reg <- opt_reg$findChildElements(\"tag\",\"span\")",
        "> ",
        "txt_reg <- lapply(reg,function(x) {x$getElementText()}) %>% unlist() %>%  limpiar_texto()",
        "> ",
        "txt_reg",
        " [1] \"seleccione region\"                             \n [2] \"\"                                              \n [3] \"region de arica y parinacota\"                  \n [4] \"\"                                              \n [5] \"region de tarapaca\"                            \n [6] \"\"                                              \n [7] \"region de antofagasta\"                         \n [8] \"\"                                              \n [9] \"region de atacama\"                             \n[10] \"\"                                              ",
        "\n[11] \"region de coquimbo\"                            \n[12] \"\"                                              \n[13] \"region de valparaiso\"                          \n[14] \"\"                                              \n[15] \"region metropolitana\"                          \n[16] \"\"                                              \n[17] \"region del libertador gral. bernardo o'higgins\"\n[18] \"\"                                              \n[19] \"region del maule\"                              \n[20] \"\"                                              ",
        "\n[21] \"region de nuble\"                               \n[22] \"\"                                              \n[23] \"region del bio bio\"                            \n[24] \"\"                                              \n[25] \"region de la araucania\"                        \n[26] \"\"                                              \n[27] \"region de los rios\"                            \n[28] \"\"                                              \n[29] \"region de los lagos\"                           \n[30] \"\"                                              ",
        "\n[31] \"region de aysen\"                               \n[32] \"\"                                              \n[33] \"region de magallanes\"                          \n[34] \"\"                                              \n",
        "> ",
        "# recuperar elementos con texto : iterador region",
        "> ",
        "it_reg <- txt_reg %>% str_detect(\"region \\\\w+\") %>% which()",
        "> ",
        "it_Reg",
        "Error: objeto 'it_Reg' no encontrado\n",
        "> ",
        "it_reg",
        " [1]  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33\n",
        "> ",
        "i<-3",
        "> ",
        "  cat(i)",
        "3",
        "> ",
        "  reg[[i]]$clickElement()",
        "> ",
        "  nom_reg <- txt_reg[[i]]",
        "> ",
        "nom_reg",
        "[1] \"region de arica y parinacota\"\n",
        "> ",
        "  # click comuna",
        "> ",
        "  sel_com$clickElement()",
        "> ",
        "  # rescatar comunas",
        "> ",
        "  opt_com <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[2]]",
        "> ",
        "  opt_com$highlightElement()",
        "> ",
        "  # rescatar elementos de comuna",
        "> ",
        "  com <- opt_com$findChildElements(\"tag\",\"span\")",
        "> ",
        "  txt_com <- lapply(com,function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "txt_com",
        " [1] \"seleccione comuna\" \"\"                  \"arica\"            \n [4] \"\"                  \"camarones\"         \"\"                 \n [7] \"general lagos\"     \"\"                  \"putre\"            \n[10] \"\"                 \n",
        "> ",
        "  it_com <- txt_com %>% str_detect(\"\\\\w\") %>% which()",
        "> ",
        "j<-3",
        "> ",
        "    nom_com <- txt_com[[j]]",
        "> ",
        "nom_com",
        "[1] \"arica\"\n",
        "> ",
        "    com[[j]]$clickElement()",
        "> ",
        "    # buscar contenedor info",
        "> ",
        "    infocom <-remDr$findElement(\"class\",\"info-comunas\")",
        "> ",
        "    # titulo",
        "> ",
        "    titulo <- remDr$findElement(\"class\",\"bloque-title\")$getElementText()[[1]] %>% limpiar_texto()",
        "> ",
        "titulo",
        "[1] \"direccion regional de arica\"\n",
        "> ",
        "    # items",
        "> ",
        "    items_info <- infocom$findChildElements(\"class\",\"items-info-comunas\")",
        "> ",
        "items_info",
        "[[1]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"96eeb841-d619-41e2-84fa-80177e130d85\"\n\n\n[[2]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\n",
        "list()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"0bd12d87-be62-4eee-a2c7-25a49181f172\"\n\n\n[[3]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"41c01bab-ccc6-40d2-8d6b-26357c4a7ca3\"\n\n\n",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "items_info_txt",
        "[1] \"comunas: arica, camarones, putre, general lagos.\"      \n[2] \"calle sotomayor 420, arica.\"                           \n[3] \"horario de atencion: lunes a viernes 8:45 a 13:45 hrs.\"\n",
        "> ",
        "j<-4",
        "> ",
        "j<-5",
        "> ",
        "    nom_com <- txt_com[[j]]",
        "> ",
        "nom_com",
        "[1] \"camarones\"\n",
        "> ",
        "    com[[j]]$clickElement()",
        "\nSelenium message:stale element reference: element is not attached to the page document\n  (Session info: chrome=89.0.4389.82)\nFor documentation on this error, please visit: https://www.seleniumhq.org/exceptions/stale_element_reference.html\nBuild info: version: '4.0.0-alpha-2', revision: 'f148142cf8', time: '2019-07-01T21:30:10'\nSystem info: host: 'LAPTOP-NG35NH82', ip: '192.168.1.197', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_251'\nDriver info: driver.version: unknown\n\n",
        "Error: \t Summary: StaleElementReference\n \t Detail: An element command failed because the referenced element is no longer attached to the DOM.\n \t class: org.openqa.selenium.StaleElementReferenceException\n\t Further Details: run errorDetails method\n",
        "> ",
        "rescatar_regiones <- function(remDr) {",
        "+ ",
        "  # primero rescata botones",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  # luego hace click en selector region",
        "+ ",
        "  btns$sel_reg$clickElement()",
        "+ ",
        "  # rescata opciones",
        "+ ",
        "  opt_reg <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[1]]",
        "+ ",
        "  # opt_reg$highlightElement()",
        "+ ",
        "  ",
        "+ ",
        "  # rescata opciones individuales de region",
        "+ ",
        "  reg <- opt_reg$findChildElements(\"tag\",\"span\")",
        "+ ",
        "  # rescata texto de opciones individuales",
        "+ ",
        "  txt_reg <- lapply(reg,function(x) {x$getElementText()}) %>% unlist() %>%  limpiar_texto()",
        "+ ",
        "  # recuperar elementos con texto : iterador region",
        "+ ",
        "  it_reg <- txt_reg %>% str_detect(\"region \\\\w+\") %>% which()",
        "+ ",
        "  return(list(opt_reg = opt_reg, reg = reg, txt_reg = txt_reg, it_reg = it_reg))",
        "+ ",
        "}",
        "> ",
        "rescatar_regiones <- function(remDr) {",
        "+ ",
        "  # inicializa elementos",
        "+ ",
        "  opt_reg <- webElement",
        "+ ",
        "  reg <- webElement",
        "+ ",
        "  # primero rescata botones",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  # luego hace click en selector region",
        "+ ",
        "  btns$sel_reg$clickElement()",
        "+ ",
        "  # rescata opciones",
        "+ ",
        "  opt_reg <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[1]]",
        "+ ",
        "  # opt_reg$highlightElement()",
        "+ ",
        "  ",
        "+ ",
        "  # rescata opciones individuales de region",
        "+ ",
        "  reg <- opt_reg$findChildElements(\"tag\",\"span\")",
        "+ ",
        "  # rescata texto de opciones individuales",
        "+ ",
        "  txt_reg <- lapply(reg,function(x) {x$getElementText()}) %>% unlist() %>%  limpiar_texto()",
        "+ ",
        "  # recuperar elementos con texto : iterador region",
        "+ ",
        "  it_reg <- txt_reg %>% str_detect(\"region \\\\w+\") %>% which()",
        "+ ",
        "  return(list(opt_reg = opt_reg, reg = reg, txt_reg = txt_reg, it_reg = it_reg))",
        "+ ",
        "}",
        "> ",
        "elem_reg <- rescatar_regiones(remDr)",
        "> ",
        "elem_reg$txt_reg",
        " [1] \"seleccione region\"                             \n [2] \"\"                                              \n [3] \"region de arica y parinacota\"                  \n [4] \"\"                                              \n [5] \"region de tarapaca\"                            \n [6] \"\"                                              \n [7] \"region de antofagasta\"                         \n [8] \"\"                                              \n [9] \"region de atacama\"                             \n[10] \"\"                                              ",
        "\n[11] \"region de coquimbo\"                            \n[12] \"\"                                              \n[13] \"region de valparaiso\"                          \n[14] \"\"                                              \n[15] \"region metropolitana\"                          \n[16] \"\"                                              \n[17] \"region del libertador gral. bernardo o'higgins\"\n[18] \"\"                                              \n[19] \"region del maule\"                              \n[20] \"\"                                              ",
        "\n[21] \"region del bio bio\"                            \n[22] \"\"                                              \n[23] \"region de la araucania\"                        \n[24] \"\"                                              \n[25] \"region de los rios\"                            \n[26] \"\"                                              \n[27] \"region de los lagos\"                           \n[28] \"\"                                              \n[29] \"region de aysen\"                               \n[30] \"\"                                              ",
        "\n[31] \"region de magallanes\"                          \n[32] \"\"                                              \n",
        "> ",
        "elem_reg$it_reg",
        " [1]  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31\n",
        "> ",
        "rescatar_comunas <- function(remDr) {",
        "+ ",
        "  # inicializa elementos",
        "+ ",
        "  opt_com <- webElement",
        "+ ",
        "  com <- webElement",
        "+ ",
        "  # primero rescata botones",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  # click comuna",
        "+ ",
        "  sel_com$clickElement()",
        "+ ",
        "  # rescatar comunas",
        "+ ",
        "  opt_com <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[2]]",
        "+ ",
        "  opt_com$highlightElement()",
        "+ ",
        "  # rescatar elementos de comuna",
        "+ ",
        "  com <- opt_com$findChildElements(\"tag\",\"span\")",
        "+ ",
        "  txt_com <- lapply(com,function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "+ ",
        "  it_com <- txt_com %>% str_detect(\"\\\\w\") %>% which()",
        "+ ",
        "  return(list(opt_com = opt_com, com = com, txt_com = txt_com, it_com = it_com))",
        "+ ",
        "}",
        "> ",
        "elem_reg <- rescatar_regiones(remDr)",
        "> ",
        "elem_reg$it_reg",
        "integer(0)\n",
        "> ",
        "elem_reg$it_reg",
        "integer(0)\n",
        "> ",
        "elem_reg$txt_reg",
        " [1] \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\"\n[25] \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\"\n",
        "> ",
        "  # luego hace click en selector region",
        "> ",
        "  btns$sel_reg$clickElement()",
        "\nSelenium message:stale element reference: element is not attached to the page document\n  (Session info: chrome=89.0.4389.82)\nFor documentation on this error, please visit: https://www.seleniumhq.org/exceptions/stale_element_reference.html\nBuild info: version: '4.0.0-alpha-2', revision: 'f148142cf8', time: '2019-07-01T21:30:10'\nSystem info: host: 'LAPTOP-NG35NH82', ip: '192.168.1.197', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_251'\nDriver info: driver.version: unknown\n\n",
        "Error: \t Summary: StaleElementReference\n \t Detail: An element command failed because the referenced element is no longer attached to the DOM.\n \t class: org.openqa.selenium.StaleElementReferenceException\n\t Further Details: run errorDetails method\n",
        "> ",
        "  # primero rescata botones",
        "> ",
        "  btns <- rescatar_botones(remDr)",
        "> ",
        "  # luego hace click en selector region",
        "> ",
        "  btns$sel_reg$clickElement()",
        "> ",
        "  # luego hace click en selector region",
        "> ",
        "  btns$sel_reg$clickElement()",
        "> ",
        "  # luego hace click en selector region",
        "> ",
        "  btns$sel_reg$clickElement()",
        "> ",
        "rescatar_regiones <- function(remDr) {",
        "+ ",
        "  # inicializa elementos",
        "+ ",
        "  opt_reg <- webElement",
        "+ ",
        "  reg <- webElement",
        "+ ",
        "  # primero rescata botones",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  # luego hace click en selector region",
        "+ ",
        "  btns$sel_reg$clickElement()",
        "+ ",
        "  # rescata opciones",
        "+ ",
        "  opt_reg <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[1]]",
        "+ ",
        "  # opt_reg$highlightElement()",
        "+ ",
        "  ",
        "+ ",
        "  # rescata opciones individuales de region",
        "+ ",
        "  reg <- opt_reg$findChildElements(\"tag\",\"span\")",
        "+ ",
        "  # rescata texto de opciones individuales",
        "+ ",
        "  txt_reg <- lapply(reg,function(x) {x$getElementText()}) %>% unlist() %>%  limpiar_texto()",
        "+ ",
        "  # recuperar elementos con texto : iterador region",
        "+ ",
        "  it_reg <- txt_reg %>% str_detect(\"region \\\\w+\") %>% which()",
        "+ ",
        "  # click para cerrar selector",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  return(list(opt_reg = opt_reg, reg = reg, txt_reg = txt_reg, it_reg = it_reg))",
        "+ ",
        "}",
        "> ",
        "  # click para cerrar selector",
        "> ",
        "  btns <- rescatar_botones(remDr)",
        "> ",
        "  # click para cerrar selector",
        "> ",
        "  btns$sel_reg$clickElement()",
        "> ",
        "rescatar_regiones <- function(remDr) {",
        "+ ",
        "  # inicializa elementos",
        "+ ",
        "  opt_reg <- webElement",
        "+ ",
        "  reg <- webElement",
        "+ ",
        "  # primero rescata botones",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  # luego hace click en selector region",
        "+ ",
        "  btns$sel_reg$clickElement()",
        "+ ",
        "  # rescata opciones",
        "+ ",
        "  opt_reg <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[1]]",
        "+ ",
        "  # opt_reg$highlightElement()",
        "+ ",
        "  ",
        "+ ",
        "  # rescata opciones individuales de region",
        "+ ",
        "  reg <- opt_reg$findChildElements(\"tag\",\"span\")",
        "+ ",
        "  # rescata texto de opciones individuales",
        "+ ",
        "  txt_reg <- lapply(reg,function(x) {x$getElementText()}) %>% unlist() %>%  limpiar_texto()",
        "+ ",
        "  # recuperar elementos con texto : iterador region",
        "+ ",
        "  it_reg <- txt_reg %>% str_detect(\"region \\\\w+\") %>% which()",
        "+ ",
        "  # click para cerrar selector",
        "+ ",
        "  btns$sel_reg$clickElement()",
        "+ ",
        "  return(list(opt_reg = opt_reg, reg = reg, txt_reg = txt_reg, it_reg = it_reg))",
        "+ ",
        "}",
        "> ",
        "  # inicializa elementos",
        "> ",
        "  opt_com <- webElement",
        "> ",
        "  com <- webElement",
        "> ",
        "  # primero rescata botones",
        "> ",
        "  btns <- rescatar_botones(remDr)",
        "> ",
        "  # click comuna",
        "> ",
        "  btns$sel_com$clickElement()",
        "> ",
        "  # rescatar comunas",
        "> ",
        "  opt_com <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[2]]",
        "> ",
        "  opt_com$highlightElement()",
        "> ",
        "  # rescatar elementos de comuna",
        "> ",
        "  com <- opt_com$findChildElements(\"tag\",\"span\")",
        "> ",
        "  txt_com <- lapply(com,function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "  it_com <- txt_com %>% str_detect(\"\\\\w\") %>% which()",
        "> ",
        "  btns$sel_com$clickElement()",
        "> ",
        "com[[5]]",
        "[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"e5117a15-5e95-453e-bce3-24125c3bef74\"\n\n",
        "> ",
        "com[[5]]$clickElement()",
        "> ",
        "com[[7]]$clickElement()",
        "> ",
        "rescatar_comunas <- function(remDr) {",
        "+ ",
        "  # inicializa elementos",
        "+ ",
        "  opt_com <- webElement",
        "+ ",
        "  com <- webElement",
        "+ ",
        "  # primero rescata botones",
        "+ ",
        "  btns <- rescatar_botones(remDr)",
        "+ ",
        "  # click comuna",
        "+ ",
        "  btns$sel_com$clickElement()",
        "+ ",
        "  # rescatar comunas",
        "+ ",
        "  opt_com <- remDr$findElements(\"xpath\",\"//*[contains(@class,'dropdown-menu open')]\")[[2]]",
        "+ ",
        "  opt_com$highlightElement()",
        "+ ",
        "  # rescatar elementos de comuna",
        "+ ",
        "  com <- opt_com$findChildElements(\"tag\",\"span\")",
        "+ ",
        "  txt_com <- lapply(com,function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "+ ",
        "  it_com <- txt_com %>% str_detect(\"\\\\w\") %>% which()",
        "+ ",
        "  # se omite click final porque este se realiza en el elemento comuna que se rescatara",
        "+ ",
        "  # btns$sel_com$clickElement()",
        "+ ",
        "  return(list(opt_com = opt_com, com = com, txt_com = txt_com, it_com = it_com))",
        "+ ",
        "}",
        "> ",
        "# visistar url busqueda",
        "> ",
        "remDr$navigate(url_data)",
        "> ",
        "btns <- rescatar_botones(remDr)",
        "> ",
        "btns$sel_reg$clickElement()",
        "> ",
        "btns$sel_reg$clickElement()",
        "> ",
        "elem_reg <- rescatar_regiones(remDr)",
        "> ",
        "> ",
        "> ",
        "elem_reg$opt_reg$clickElement()",
        "> ",
        "# visistar url busqueda",
        "> ",
        "remDr$navigate(url_data)",
        "> ",
        "btns <- rescatar_botones(remDr)",
        "> ",
        "elem_reg <- rescatar_regiones(remDr)",
        "> ",
        "btns$sel_reg$clickElement()",
        "> ",
        "elem_reg$opt_reg$highlightElement()",
        "> ",
        "elem_reg$it_reg",
        " [1]  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33\n",
        "> ",
        "i",
        "[1] 3\n",
        "> ",
        "  elem_reg$reg[[i]]$clickElement()",
        "> ",
        "  # nombre region",
        "> ",
        "  nom_reg <- elem_reg$txt_reg[[i]]",
        "> ",
        "  # click comuna",
        "> ",
        "  btns$sel_com$clickElement()",
        "> ",
        "  elem_com <- rescatar_comunas(remDr)",
        "> ",
        "elem_com$txt_com",
        " [1] \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\"\n",
        "> ",
        "  elem_com <- rescatar_comunas(remDr)",
        "> ",
        "elem_com$txt_com",
        " [1] \"seleccione comuna\" \"\"                  \"arica\"            \n [4] \"\"                  \"camarones\"         \"\"                 \n [7] \"general lagos\"     \"\"                  \"putre\"            \n[10] \"\"                 \n",
        "> ",
        "elem_com$it_com",
        "[1] 1 3 5 7 9\n",
        "> ",
        "j",
        "[1] 5\n",
        "> ",
        "    elem_com$com[[j]]$clickElement()",
        "> ",
        "    # buscar contenedor info",
        "> ",
        "    infocom <-remDr$findElement(\"class\",\"info-comunas\")",
        "> ",
        "    # titulo",
        "> ",
        "    titulo <- remDr$findElement(\"class\",\"bloque-title\")$getElementText()[[1]] %>% limpiar_texto()",
        "> ",
        "    # items",
        "> ",
        "    items_info <- infocom$findChildElements(\"class\",\"items-info-comunas\")",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "    # volvera buscar elementos",
        "> ",
        "    btns <- rescatar_botones(remDr)",
        "> ",
        "    elem_reg <- rescatar_regiones(remDr)",
        "> ",
        "    elem_reg <- rescatar_comunas(remDr)",
        "> ",
        "btns$sel_com$clickElement()",
        "> ",
        "    elem_com<- rescatar_comunas(remDr)",
        "> ",
        "  last_com <- max(elem_com$it_com)",
        "> ",
        "last_com",
        "[1] 9\n",
        "> ",
        "    # buscar contenedor info",
        "> ",
        "    infocom <-remDr$findElement(\"class\",\"info-comunas\")",
        "> ",
        "    infocom$highlightElement()",
        "> ",
        "    # titulo",
        "> ",
        "    titulo <- remDr$findElement(\"class\",\"bloque-title\")$getElementText()[[1]] %>% limpiar_texto()",
        "> ",
        "titulo",
        "[1] \"unidad de maipu\"\n",
        "> ",
        "    # items",
        "> ",
        "    items_info <- infocom$findChildElements(\"class\",\"items-info-comunas\")",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "items_info_txt",
        "[1] \"comunas: maipu, cerrillos, padre hurtado, penaflor, talagante, el monte, isla de maipo.\"\n[2] \"avenida pajaritos 3195, local 7 y 8, maipu.\"                                            \n[3] \"\"                                                                                       \n[4] \"horario de atencion: lunes a viernes 9:00 a 14:00 hrs.\"                                 \n[5] \"talagante\"                                                                              \n[6] \"horario de atencion: miercoles de 09:00 a 14:00 horas.\"                                 ",
        "\n[7] \"lugar: gobernacion provincial.\"                                                         \n[8] \"\"                                                                                       \n",
        "> ",
        "    # items",
        "> ",
        "    items_info <- infocom$findChildElements(\"class\",\"items-info-comunas\")",
        "\nSelenium message:stale element reference: element is not attached to the page document\n  (Session info: chrome=89.0.4389.82)\nFor documentation on this error, please visit: https://www.seleniumhq.org/exceptions/stale_element_reference.html\nBuild info: version: '4.0.0-alpha-2', revision: 'f148142cf8', time: '2019-07-01T21:30:10'\nSystem info: host: 'LAPTOP-NG35NH82', ip: '192.168.1.197', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_251'\nDriver info: driver.version: unknown\n\n",
        "Error: \t Summary: StaleElementReference\n \t Detail: An element command failed because the referenced element is no longer attached to the DOM.\n \t class: org.openqa.selenium.StaleElementReferenceException\n\t Further Details: run errorDetails method\n",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "\nSelenium message:stale element reference: element is not attached to the page document\n  (Session info: chrome=89.0.4389.82)\nFor documentation on this error, please visit: https://www.seleniumhq.org/exceptions/stale_element_reference.html\nBuild info: version: '4.0.0-alpha-2', revision: 'f148142cf8', time: '2019-07-01T21:30:10'\nSystem info: host: 'LAPTOP-NG35NH82', ip: '192.168.1.197', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_251'\nDriver info: driver.version: unknown\n\n",
        "Error: \t Summary: StaleElementReference\n \t Detail: An element command failed because the referenced element is no longer attached to the DOM.\n \t class: org.openqa.selenium.StaleElementReferenceException\n\t Further Details: run errorDetails method\n",
        "> ",
        "    # buscar contenedor info",
        "> ",
        "    infocom <-remDr$findElement(\"class\",\"info-comunas\")",
        "> ",
        "    infocom$highlightElement()",
        "> ",
        "    # titulo",
        "> ",
        "    titulo <- remDr$findElement(\"class\",\"bloque-title\")$getElementText()[[1]] %>% limpiar_texto()",
        "> ",
        "    # items",
        "> ",
        "    items_info <- infocom$findChildElements(\"class\",\"items-info-comunas\")",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "items_info_txt",
        "[1] \"comunas: cerro navia, curacavi, estacion central, lo prado, pudahuel, quinta normal, renca.\"\n[2] \"romero 3226, santiago.\"                                                                     \n[3] \"horario de atencion: lunes a viernes 9:00 a 14:00 hrs.\"                                     \n",
        "> ",
        "    # buscar contenedor info",
        "> ",
        "    infocom <-remDr$findElement(\"class\",\"info-comunas\")",
        "> ",
        "    infocom$highlightElement()",
        "> ",
        "    # items\n    items_info <- infocom$findChildElements(\"class\",\"items-info-comunas\")",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto()",
        "> ",
        "    # titulo",
        "> ",
        "    titulo <- remDr$findElement(\"class\",\"bloque-title\")$getElementText()[[1]] %>% limpiar_texto()",
        "> ",
        "    # volvera buscar elementos",
        "> ",
        "    btns <- rescatar_botones(remDr)",
        "> ",
        "items_info_txt",
        "[1] \"comunas:\\niquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion:\\npasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion:\\n10:00 a 13:00 hrs.\"                                      \n[4] \"fono:\\n223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la\\noficina alto hospicio\"            \n",
        "> ",
        "items_info_txt %>% str_replace_all(\"\\\\\\\\w\",\"\")",
        "[1] \"comunas:\\niquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion:\\npasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion:\\n10:00 a 13:00 hrs.\"                                      \n[4] \"fono:\\n223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la\\noficina alto hospicio\"            \n",
        "> ",
        "items_info_txt %>% str_replace_all(\"\\\\\\w\",\"\")",
        "Error: '\\w' is an unrecognized escape in character string starting \"\"\\\\\\w\"\n",
        "> ",
        "items_info_txt %>% str_replace_all(\"\\n\",\"\")",
        "[1] \"comunas:iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion:pasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion:10:00 a 13:00 hrs.\"                                      \n[4] \"fono:223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en laoficina alto hospicio\"            \n",
        "> ",
        "items_info_txt %>% str_replace_all(\"\\n\",\" \")",
        "[1] \"comunas: iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion: pasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion: 10:00 a 13:00 hrs.\"                                      \n[4] \"fono: 223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la oficina alto hospicio\"            \n",
        "> ",
        "txt_com",
        " [1] \"seleccione comuna\" \"\"                  \"arica\"            \n [4] \"\"                  \"camarones\"         \"\"                 \n [7] \"general lagos\"     \"\"                  \"putre\"            \n[10] \"\"                 \n",
        "> ",
        "elem_com$txt_com",
        " [1] \"seleccione comuna\" \"\"                  \"arica\"            \n [4] \"\"                  \"camarones\"         \"\"                 \n [7] \"general lagos\"     \"\"                  \"putre\"            \n[10] \"\"                 \n",
        "> ",
        "    # contenedor info comuna --------------------------------------------------",
        "> ",
        "    infocom <-remDr$findElement(\"class\",\"info-comunas\")",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "    infocom$highlightElement()",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "    # titulo",
        "> ",
        "    titulo <- remDr$findElement(\"class\",\"bloque-title\")$getElementText()[[1]] %>% limpiar_texto()",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "titulo",
        "[1] \"d. regional iquique\"\n",
        "> ",
        "items_info",
        "[[1]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"b5dba0b1-4120-4386-9a2a-0ae9e1bee68d\"\n\n\n[[2]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\n",
        "list()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"ce42dd20-1cc9-44f2-8855-a0a0aaec9932\"\n\n\n[[3]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"d4ecae81-e82a-496f-9dca-075b3b1feb49\"\n\n\n[[4]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"",
        "\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"13a6d291-94a8-4c1b-b144-08fdaef4cfc3\"\n\n\n[[5]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"6ae2d4b3-98f5-4d49-99d8-d9c85c80a43a\"\n\n\n",
        "> ",
        "items_info_txt",
        "[1] \"comunas:\\niquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion:\\npasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion:\\n10:00 a 13:00 hrs.\"                                      \n[4] \"fono:\\n223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la\\noficina alto hospicio\"            \n",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto() %>% str_replace_all('\\n',' ')",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "items_info_txt",
        "[1] \"comunas:\\niquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion:\\npasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion:\\n10:00 a 13:00 hrs.\"                                      \n[4] \"fono:\\n223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la\\noficina alto hospicio\"            \n",
        "> ",
        "items_info",
        "[[1]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"b5dba0b1-4120-4386-9a2a-0ae9e1bee68d\"\n\n\n[[2]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\n",
        "list()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"ce42dd20-1cc9-44f2-8855-a0a0aaec9932\"\n\n\n[[3]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"d4ecae81-e82a-496f-9dca-075b3b1feb49\"\n\n\n[[4]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"",
        "\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"13a6d291-94a8-4c1b-b144-08fdaef4cfc3\"\n\n\n[[5]]\n[1] \"remoteDriver fields\"\n$remoteServerAddr\n[1] \"localhost\"\n\n$port\n[1] 4567\n\n$browserName\n[1] \"chrome\"\n\n$version\n[1] \"\"\n\n$platform\n[1] \"ANY\"\n\n$javascript\n[1] TRUE\n\n$nativeEvents\n[1] TRUE\n\n$extraCapabilities\nlist()\n\n[1] \"webElement fields\"\n$elementId\n[1] \"6ae2d4b3-98f5-4d49-99d8-d9c85c80a43a\"\n\n\n",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto() %>% str_replace_all('\\n',' ')",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "    items_info_txt <- lapply(items_info, function(x) {x$getElementText()}) %>% unlist() %>% limpiar_texto() ",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "    items_info_txt <- items_info_txt %>% ",
        "+ ",
        "    # llenar info",
        "+ ",
        "    # direccion siempre es el segundo elemento",
        "+ ",
        "    ",
        "+ ",
        "",
        "+ ",
        "    # hay oficinas que sirven a mas de una comuna, lo cual se describe en Comunas: nombres",
        "+ ",
        "    # Para evitar visitar dos veces la misma oficina",
        "+ ",
        "    # - guardar Comuna: nombres",
        "+ ",
        "    # - crear listado de comunas a no visitar",
        "+ ",
        "    # - al iniciar el checkeo comunal se revisa si el nombre de la comuna esta en este listado",
        "+ ",
        "    # - añadir elementos al listado a medida que se recupere esta informacion (no actualizar)",
        "+ ",
        "",
        "+ ",
        "    # volvera buscar elementos",
        "+ ",
        "    btns <- rescatar_botones(remDr)",
        "\nSelenium message:No active session with ID a65ab12af796d4558d89d20a399eb862\n\n",
        "Error: \t Summary: NoSuchDriver\n \t Detail: A session is either terminated or not started\n\t Further Details: run errorDetails method\n",
        "> ",
        "    items_info_txt <- items_info_txt %>% %>% str_replace_all('\\n',' ')",
        "Error: inesperado SPECIAL in \"    items_info_txt <- items_info_txt %>% %>%\"\n",
        "> ",
        "items_info_txt",
        "[1] \"comunas:\\niquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion:\\npasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion:\\n10:00 a 13:00 hrs.\"                                      \n[4] \"fono:\\n223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la\\noficina alto hospicio\"            \n",
        "> ",
        "    items_info_txt <- items_info_txt %>% str_replace_all('\\n',' ')",
        "> ",
        "items_info_txt",
        "[1] \"comunas: iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n[2] \"direccion: pasaje huantajaya nº 3130, alto hospicio\"                          \n[3] \"horario de atencion: 10:00 a 13:00 hrs.\"                                      \n[4] \"fono: 223951000\"                                                              \n[5] \"estas comunas tambien seran atendidas en la oficina alto hospicio\"            \n",
        "> ",
        "    # llenar info",
        "> ",
        "    # direccion siempre es el segundo elemento",
        "> ",
        "    direccion <- tems_info_txt[[2]]",
        "Error: objeto 'tems_info_txt' no encontrado\n",
        "> ",
        "    # llenar info",
        "> ",
        "    # direccion siempre es el segundo elemento",
        "> ",
        "    direccion <- items_info_txt[[2]]",
        "> ",
        "direccion",
        "[1] \"direccion: pasaje huantajaya nº 3130, alto hospicio\"\n",
        "> ",
        "    items_info_txt %>% str_subset('comunas:')",
        "[1] \"comunas: iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n",
        "> ",
        "    items_info_txt %>% str_subset('comunas:') %>% str_replace('comunas:','') %>% stri_c(sep=\",\")",
        "[1] \" iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n",
        "> ",
        "    items_info_txt %>% str_subset('comunas:') %>% str_replace('comunas:','') %>% str_c(sep=\",\")",
        "[1] \" iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n",
        "> ",
        "    items_info_txt %>% str_subset('comunas:') %>% str_replace('comunas:','') %>% str_split(\",\")",
        "[[1]]\n[1] \" iquique\"        \" pica\"           \" pozo almonte\"   \" huara\"         \n[5] \" camina\"         \" colchane\"       \" alto hospicio.\"\n\n",
        "> ",
        "    items_info_txt %>% str_subset('comunas:') %>% str_replace('comunas:','') %>% str_split(\",\") %>% flatten() %>% str_trim()",
        "[1] \"iquique\"        \"pica\"           \"pozo almonte\"   \"huara\"         \n[5] \"camina\"         \"colchane\"       \"alto hospicio.\"\n",
        "> ",
        "    items_info_txt %>% str_subset('comunas:') %>% str_replace('comunas:','') %>% str_replace_all(\"\\\\.\",\"\") %>% str_split(\",\") %>% flatten() %>% str_trim()",
        "[1] \"iquique\"       \"pica\"          \"pozo almonte\"  \"huara\"        \n[5] \"camina\"        \"colchane\"      \"alto hospicio\"\n",
        "> ",
        "    comunas_atiende <- items_info_txt %>% str_subset('comunas:')",
        "> ",
        "comunas_atiende",
        "[1] \"comunas: iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n",
        "> ",
        "    comunas_atiende_vect <- comunas_atiende %>% str_replace('comunas:','') %>% str_replace_all(\"\\\\.\",\"\") %>% str_split(\",\") %>% flatten() %>% str_trim()",
        "> ",
        "comunas_atiende_vect",
        "[1] \"iquique\"       \"pica\"          \"pozo almonte\"  \"huara\"        \n[5] \"camina\"        \"colchane\"      \"alto hospicio\"\n",
        "> ",
        "    horario_atencion <- items_info_txt %>% str_subset('horario atencion:')",
        "> ",
        "horario_atencion",
        "character(0)\n",
        "> ",
        "    horario_atencion <- items_info_txt %>% str_subset('horario de atencion:')",
        "> ",
        "horario_atencion",
        "[1] \"horario de atencion: 10:00 a 13:00 hrs.\"\n",
        "> ",
        "    horario_atencion <- items_info_txt %>% str_subset('horario de atencion:')[[1]]",
        "Error in type(pattern) : \n  el argumento \"pattern\" está ausente, sin valor por omisión\n",
        "> ",
        "str_subset(items_info_txt,'horario de atencion:')",
        "[1] \"horario de atencion: 10:00 a 13:00 hrs.\"\n",
        "> ",
        "      str_subset(items_info_txt,'horario de atencion:')[[1]]",
        "[1] \"horario de atencion: 10:00 a 13:00 hrs.\"\n",
        "> ",
        "resultado <-",
        "+ ",
        "  tibble(",
        "+ ",
        "    region = as.character(),",
        "+ ",
        "    comuna = as.character(),",
        "+ ",
        "    titulo = as.character(),",
        "+ ",
        "    comunas_atiende = as.character(),",
        "+ ",
        "    direccion  = as.character(),",
        "+ ",
        "    horario = as.character()",
        "+ ",
        "    # href = as.character(),",
        "+ ",
        "  )",
        "> ",
        "nom_reg",
        "[1] \"region de arica y parinacota\"\n",
        "> ",
        "titulo",
        "[1] \"d. regional iquique\"\n",
        "> ",
        "direccion",
        "[1] \"direccion: pasaje huantajaya nº 3130, alto hospicio\"\n",
        "> ",
        "    # llenar info",
        "> ",
        "    resultado <-",
        "+ ",
        "      add_row(",
        "+ ",
        "        resultado,",
        "+ ",
        "        region = nom_reg,",
        "+ ",
        "        comuna = nom_com,",
        "+ ",
        "        titulo = titulo,",
        "+ ",
        "        direccion = direccion,",
        "+ ",
        "        horario = horario_atencion",
        "+ ",
        "      )",
        "> ",
        "resultado",
        "\u001B[38;5;246m# A tibble: 1 x 6\u001B[39m\n  region     comuna  titulo   comunas_atiende direccion        horario     \n  \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m    \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m           \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m            \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m       \n\u001B[38;5;250m1\u001B[39m region de~ camaro~ d. regi~ \u001B[31mNA\u001B[39m              direccion: pasa~ horario de ~\n",
        "> ",
        "comunas_atiende",
        "[1] \"comunas: iquique, pica, pozo almonte, huara, camina, colchane, alto hospicio.\"\n\nRestarting R session...\n\n"
    ]
}